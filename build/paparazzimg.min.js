/*!
 * Paparazzimg
 * https://github.com/nyratas/paparazzimg
 *
 * Copyright (c) 2016 Toon Van den Bos
 * Licensed under the MIT license.
 */
"use strict";var paparazzimg=function(t){function i(){window.addEventListener("resize",t.addTrackpoint,!1)}function e(i){return null===i||void 0===i?!1:i.nodeType?new t.tracker(i):(console.error("Paparazzimg: variable is not a valid DOM element."),!1)}function n(t){u[t.id]=t,u[t.id].setActive()}function h(t){return void 0===c[t]?c[t]=[t]:c[t].push(t+c[t].length),c[t][c[t].length-1]}function s(t){return void 0!==u[t]?(u[t].setInactive(),u[t].report()):null}function r(){var t,i={};for(t in u)i[t]=s(t);return i}function a(t){u[t].isActive&&u[t].point()}function o(){for(var t in u)a(t)}var u={},c={};return t.track=function(t){var i=e(t);i&&n(i)},t.release=function(t){return void 0==t?r():s(t)},t.addId=function(t){return t=t.toLowerCase(),h(t)},t.addTrackpoint=function(t){"String"==typeof t&&a(t),o()},i(),t}(paparazzimg||{});paparazzimg.tracker=function(t){this.element=null,this.id=null,this.points=[],this.isActive=!1,this.init=function(t){this.element=t,this.setId()},this.setId=function(){this.element.getAttribute("id")?this.id=paparazzimg.addId(this.element.getAttribute("id")):(this.id=paparazzimg.addId(this.element.nodeName),this.element.setAttribute("id",this.id))},this.setActive=function(){this.isActive=!0},this.setInactive=function(){this.isActive=!1},this.report=function(){var t={};return t.count=this.points.length,t.extremum=this.getExtremum(),t.optimal=this.getOptimal(t.extremum),this.reset(),t},this.point=function(){this.points.push(this.getPoint())},this.reset=function(){this.points=[]},this.getPoint=function(){var t={};return t.width=this.element.clientWidth,t.height=this.element.clientHeight,t.ratio=t.width/t.height,t},this.getExtremum=function(){var t,i,e={};for(t=0;t<this.points.length;t++)for(i in this.points[t])void 0===e[i]?e[i]={min:this.points[t][i],max:this.points[t][i]}:this.points[t][i]>e[i].max?e[i].max=this.points[t][i]:this.points[t][i]<e[i].min&&(e[i].min=this.points[t][i]);return e},this.getOptimal=function(t){var i={};return i.static=this.getStaticSize(t),i.fluidWidth=this.getFluidWidthSize(t),i.fluidHeight=this.getFluidHeightSize(t),i},this.getStaticSize=function(t){return{width:Math.ceil(t.width.max),height:Math.ceil(t.height.max)}},this.getFluidWidthSize=function(t){return{width:Math.ceil(t.height.max*t.ratio.max),height:Math.ceil(t.width.max/t.ratio.min)}},this.getFluidHeightSize=function(t){return{width:Math.ceil(t.height.min*t.ratio.max),height:Math.ceil(t.width.min/t.ratio.min)}},this.init(t)};